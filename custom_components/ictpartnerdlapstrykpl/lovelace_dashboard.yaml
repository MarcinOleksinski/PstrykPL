# Przykładowy dashboard Lovelace dla integracji ICTPartnerDlaPstryk.pl
views:
  - title: Pstryk Energia
    path: pstryk
    icon: mdi:flash
    cards:
      # 1. Średnie ceny dziś: zakup i sprzedaż
      - type: entities
        title: Średnie ceny energii (dzisiaj)
        entities:
          - entity: sensor.pstryk_price_today
            name: Średnia cena zakupu (PLN/kWh)
          - entity: sensor.pstryk_prosumer_price_today
            name: Średnia cena sprzedaży (PLN/kWh)

      # 2. Cena zakupu: godzina wcześniej, bieżąca, za godzinę
      - type: glance
        title: Cena zakupu energii (poprzednia, bieżąca, następna godzina)
        entities:
          - entity: sensor.pstryk_price_hour_{{ (now().hour - 1) % 24 | string | zfill(2) }}
            name: Poprzednia godzina
          - entity: sensor.pstryk_price_hour_{{ now().hour | string | zfill(2) }}
            name: Bieżąca godzina
          - entity: sensor.pstryk_price_hour_{{ (now().hour + 1) % 24 | string | zfill(2) }}
            name: Następna godzina

      # 3. Cena sprzedaży: godzina wcześniej, bieżąca, za godzinę
      - type: glance
        title: Cena sprzedaży energii (poprzednia, bieżąca, następna godzina)
        entities:
          - entity: sensor.pstryk_prosumer_price_hour_{{ (now().hour - 1) % 24 | string | zfill(2) }}
            name: Poprzednia godzina
          - entity: sensor.pstryk_prosumer_price_hour_{{ now().hour | string | zfill(2) }}
            name: Bieżąca godzina
          - entity: sensor.pstryk_prosumer_price_hour_{{ (now().hour + 1) % 24 | string | zfill(2) }}
            name: Następna godzina

      # 4. Ceny zakupu energii 00-23
      - type: history-graph
        title: Ceny zakupu energii (00-23)
        entities:
          {% for h in range(24) %}
          - sensor.pstryk_price_hour_{{ '%02d' % h }}
          {% endfor %}
        hours_to_show: 24
        refresh_interval: 60

      # 5. Ceny sprzedaży energii 00-23
      - type: history-graph
        title: Ceny sprzedaży energii (00-23)
        entities:
          {% for h in range(24) %}
          - sensor.pstryk_prosumer_price_hour_{{ '%02d' % h }}
          {% endfor %}
        hours_to_show: 24
        refresh_interval: 60
